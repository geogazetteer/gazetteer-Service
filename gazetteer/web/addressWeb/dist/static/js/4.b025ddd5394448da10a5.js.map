{"version":3,"sources":["webpack:///src/views/batchHandle.vue","webpack:///./src/views/batchHandle.vue?1082","webpack:///./src/views/batchHandle.vue"],"names":["batchHandle","name","components","loading","created","data","showLoading","excelUrl","encodeURI","BATCHSERVICE","columns","title","type","width","align","key","className","tableData","upLoadUrl","progressNum","methods","exportData","this","$refs","table","exportCsv","filename","beforeUpload","file","nameArr","split","length","$Modal","warning","upload","clearFiles","onUpSuccess","res","fileList","$Message","success","onUpError","error","views_batchHandle","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","href","icon","ref","action","accept","format","before-upload","on-success","on-error","percent","status","on","click","_e","stripe","border","max-height","scopedSlots","_u","fn","row","fuzzy","staticStyle","background","fix","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/4.b025ddd5394448da10a5.js","sourcesContent":["\n<!--批量处理页-->\n<template>\n  <div class=\"Wrapper\">\n    <h1 class=\"title\">批量地址匹配服务</h1>\n    <div class=\"topTool flex_row\">\n      <div class=\"btnBox flex_row\">\n        <a :href=\"excelUrl\" class=\"item\">\n          <Button icon=\"md-download\" type=\"primary\" >下载模板</Button>\n        </a>\n\n\n        <Upload :action=\"upLoadUrl\" class=\"flex_row\" ref=\"upload\"\n                name=\"fileName\"\n                accept=\"file\"\n                :format=\"['xls','xlsx']\"\n                :before-upload=\"beforeUpload\"\n                :on-success=\"onUpSuccess\"\n                :on-error=\"onUpError\"\n        >\n          <Button  class=\"item\" icon=\"md-arrow-round-up\" type=\"primary\">导入</Button>\n\n        </Upload>\n\n      </div>\n\n      <div class=\"right flex_row\" v-if=\"progressNum\">\n        <div class=\"label\">匹配进度：</div>\n        <Progress :percent=\"progressNum\" status=\"active\"/><!--进度条-->\n\n        <div class=\"item\">\n          <Button icon=\"ios-redo\" type=\"primary\" @click=\"exportData\">导出</Button>\n        </div>\n        <!--<Icon type=\"md-refresh-circle\" color=\"#3385ff\" size=\"32\" class=\"refresh\" title=\"刷新\"/>&lt;!&ndash;刷新&ndash;&gt;-->\n      </div>\n\n    </div>\n\n\n\n    <Table ref=\"table\"\n      :columns=\"columns\" :data=\"tableData\"\n      stripe border max-height=\"80%\"\n    >\n\n      <template slot-scope=\"{ row }\" slot=\"fuzzy\">\n        <Progress :percent=\"row.fuzzy\" status=\"active\"/><!--相似度-->\n      </template>\n    </Table>\n\n\n    <Spin fix style=\"background: rgba(255,255,255,.5);\" v-if=\"showLoading\">\n      <loading></loading>\n    </Spin>\n\n  </div>\n\n</template>\n\n<script>\nimport loading from '../components/loading'\nexport default {\n  name: 'batchHandle',\n  components: {\n    loading\n  },\n  created(){\n\n  },\n  data () {\n    return {\n      showLoading:false,\n      excelUrl:encodeURI(BATCHSERVICE['modelUrl']),//批量下载excel模板\n      columns: [\n        /*{\n          title:' ',\n          width:50,\n          type: 'selection'\n        },*/\n        {\n          title: '',\n          type:'index',\n\t\t      width:70,\n          align:'center'\n        },\n        {\n          title: '地址',\n          key: 'address',\n\t\t  className:'header'\n        },\n        {\n          title: '经度',\n          key: 'longitude',\n          className:'header'\n        },\n        {\n          title: '纬度',\n          key: 'latitude',\n\t\t  className:'header'\n        }\n      ],\n      tableData: [\n      ],\n\n      upLoadUrl:BATCHSERVICE['uploadUrl'],//上传url\n      progressNum:0,//进度条\n    }\n  },\n  methods:{\n    exportData(){\n      this.$refs.table.exportCsv({\n        filename: '批量转换结果'\n      });\n    },\n\n    //导入前\n    beforeUpload(file){\n      var $this = this;\n\n      var nameArr=file.name.split('.');\n      if(nameArr[nameArr.length-1]=='xls'||nameArr[nameArr.length-1]=='xlsx'){\n        //判断上传文件的类型是excel后缀\n        $this.showLoading=true\n        //清空上传列表\n        $this.$refs.upload.clearFiles();\n      }else{\n        $this.$Modal.warning({\n          title: '上传文件后缀应为.xls或.xlsx!',\n          width:320\n        });\n        return false\n      }\n\n    },\n    //导入成功\n    onUpSuccess(res, file, fileList) {\n      this.$Message.success(fileList[0].name+'转换成功!');\n      this.tableData=res['rows'];\n      this.progressNum=100;\n      this.showLoading=false;\n    },\n    //导入失败\n    onUpError(error, file, fileList){\n      this.showLoading=false;\n      this.$Message.error( fileList.name+'转换失败，请重试！');\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.Wrapper{\n  width: 100%;\n  height: 100%;\n  position: relative;\n  border: 2px solid #3385ff;\n  background: #fdfdfd;\n  padding: 0 4%;\n  border-radius: 10px;\n\n}\n  .title{\n    margin-bottom: 20px;\n    text-align: center;\n    margin-top: 50px;\n  }\n\n.topTool{\n  margin-bottom: 20px;\n}\n  .topTool .btnBox{\n    flex-grow: 3;\n    justify-content: flex-start;\n  }\n.topTool .btnBox .item{\n  margin-right: 5px;\n}\n  .topTool .right{\n    flex-grow: 1;\n  }\n.topTool .right .label\n{\n  flex-shrink: 0;\n}\n  .refresh{\n    cursor: pointer;\n  }\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/batchHandle.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Wrapper\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"批量地址匹配服务\")]),_vm._v(\" \"),_c('div',{staticClass:\"topTool flex_row\"},[_c('div',{staticClass:\"btnBox flex_row\"},[_c('a',{staticClass:\"item\",attrs:{\"href\":_vm.excelUrl}},[_c('Button',{attrs:{\"icon\":\"md-download\",\"type\":\"primary\"}},[_vm._v(\"下载模板\")])],1),_vm._v(\" \"),_c('Upload',{ref:\"upload\",staticClass:\"flex_row\",attrs:{\"action\":_vm.upLoadUrl,\"name\":\"fileName\",\"accept\":\"file\",\"format\":['xls','xlsx'],\"before-upload\":_vm.beforeUpload,\"on-success\":_vm.onUpSuccess,\"on-error\":_vm.onUpError}},[_c('Button',{staticClass:\"item\",attrs:{\"icon\":\"md-arrow-round-up\",\"type\":\"primary\"}},[_vm._v(\"导入\")])],1)],1),_vm._v(\" \"),(_vm.progressNum)?_c('div',{staticClass:\"right flex_row\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"匹配进度：\")]),_vm._v(\" \"),_c('Progress',{attrs:{\"percent\":_vm.progressNum,\"status\":\"active\"}}),_vm._v(\" \"),_c('div',{staticClass:\"item\"},[_c('Button',{attrs:{\"icon\":\"ios-redo\",\"type\":\"primary\"},on:{\"click\":_vm.exportData}},[_vm._v(\"导出\")])],1)],1):_vm._e()]),_vm._v(\" \"),_c('Table',{ref:\"table\",attrs:{\"columns\":_vm.columns,\"data\":_vm.tableData,\"stripe\":\"\",\"border\":\"\",\"max-height\":\"80%\"},scopedSlots:_vm._u([{key:\"fuzzy\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('Progress',{attrs:{\"percent\":row.fuzzy,\"status\":\"active\"}})]}}])}),_vm._v(\" \"),(_vm.showLoading)?_c('Spin',{staticStyle:{\"background\":\"rgba(255,255,255,.5)\"},attrs:{\"fix\":\"\"}},[_c('loading')],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d6dab16e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/batchHandle.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d6dab16e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./batchHandle.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./batchHandle.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./batchHandle.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d6dab16e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./batchHandle.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d6dab16e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/batchHandle.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}